{"sections":[],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities"]]},"schemaVersion":{"minor":3,"major":0,"patch":0},"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/Examples","interfaceLanguage":"swift"},"abstract":[{"text":"Practical examples for common Live Activities integration scenarios.","type":"text"}],"metadata":{"role":"article","roleHeading":"Article","modules":[{"name":"PushwooshLiveActivities"}],"title":"Code Examples"},"seeAlsoSections":[{"generated":true,"title":"Getting Started","identifiers":["doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/GettingStarted"]}],"variants":[{"paths":["\/documentation\/pushwooshliveactivities\/examples"],"traits":[{"interfaceLanguage":"swift"}]},{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/pushwooshliveactivities\/examples"]}],"primaryContentSections":[{"content":[{"level":2,"type":"heading","anchor":"Overview","text":"Overview"},{"inlineContent":[{"type":"text","text":"This guide provides working code examples for typical use cases with PushwooshLiveActivities."}],"type":"paragraph"},{"text":"Delivery Tracking","anchor":"Delivery-Tracking","type":"heading","level":2},{"level":3,"text":"Activity Attributes","type":"heading","anchor":"Activity-Attributes"},{"code":["import ActivityKit","import PushwooshLiveActivities","","struct DeliveryActivityAttributes: PushwooshLiveActivityAttributes {","    var pushwoosh: PushwooshLiveActivityAttributeData","","    var orderNumber: String","    var driverName: String","    var deliveryAddress: String","","    struct ContentState: PushwooshLiveActivityContentState {","        var pushwoosh: PushwooshLiveActivityContentStateData?","","        enum DeliveryStatus: String, Codable {","            case preparing","            case enRoute","            case nearBy","            case delivered","        }","","        var status: DeliveryStatus","        var estimatedArrival: Date","        var currentLocation: String","    }","}"],"type":"codeListing","syntax":"swift"},{"anchor":"Starting-Delivery-Tracking","text":"Starting Delivery Tracking","type":"heading","level":3},{"type":"codeListing","code":["import ActivityKit","import PushwooshLiveActivities","","func startDeliveryTracking(orderNumber: String, driverName: String, address: String) {","    guard #available(iOS 16.1, *) else { return }","","    let attributes = DeliveryActivityAttributes(","        pushwoosh: .create(activityId: \"delivery-\\(orderNumber)\"),","        orderNumber: orderNumber,","        driverName: driverName,","        deliveryAddress: address","    )","","    let contentState = DeliveryActivityAttributes.ContentState(","        pushwoosh: nil,","        status: .preparing,","        estimatedArrival: Date().addingTimeInterval(2700),","        currentLocation: \"Restaurant\"","    )","","    do {","        let activity = try Activity<DeliveryActivityAttributes>.request(","            attributes: attributes,","            contentState: contentState,","            pushType: .token","        )","","        print(\"Delivery tracking started: \\(activity.id)\")","    } catch {","        print(\"Failed to start delivery tracking: \\(error)\")","    }","}"],"syntax":"swift"},{"anchor":"Ending-Delivery-Tracking","type":"heading","level":3,"text":"Ending Delivery Tracking"},{"type":"codeListing","syntax":"swift","code":["import ActivityKit","import PushwooshLiveActivities","","func endDeliveryTracking() async {","    guard #available(iOS 16.1, *) else { return }","","    for activity in Activity<DeliveryActivityAttributes>.activities {","        await activity.end(nil, dismissalPolicy: .immediate)","    }","","    Pushwoosh.LiveActivities.stopLiveActivity()","}"]},{"type":"heading","anchor":"Push-Payload-for-Delivery-Updates","level":3,"text":"Push Payload for Delivery Updates"},{"syntax":"json","code":["{","  \"aps\": {","    \"alert\": \"Your order is on the way!\"","  },","  \"live_activity\": {","    \"event\": \"update\",","    \"content-state\": {","      \"status\": \"enRoute\",","      \"estimatedArrival\": \"2024-11-06T15:45:00Z\",","      \"currentLocation\": \"Main Street\"","    },","    \"attributes-type\": \"DeliveryActivityAttributes\"","  }","}"],"type":"codeListing"},{"type":"heading","level":2,"anchor":"Sports-Score-Tracking","text":"Sports Score Tracking"},{"level":3,"anchor":"Activity-Attributes","text":"Activity Attributes","type":"heading"},{"syntax":"swift","type":"codeListing","code":["import ActivityKit","import PushwooshLiveActivities","","struct GameActivityAttributes: PushwooshLiveActivityAttributes {","    var pushwoosh: PushwooshLiveActivityAttributeData","","    var homeTeam: String","    var awayTeam: String","    var league: String","","    struct ContentState: PushwooshLiveActivityContentState {","        var pushwoosh: PushwooshLiveActivityContentStateData?","","        var homeScore: Int","        var awayScore: Int","        var period: String","        var timeRemaining: String","    }","}"]},{"anchor":"Starting-Game-Tracking","type":"heading","level":3,"text":"Starting Game Tracking"},{"syntax":"swift","type":"codeListing","code":["import ActivityKit","import PushwooshLiveActivities","","func startGameTracking(gameId: String, homeTeam: String, awayTeam: String) {","    guard #available(iOS 16.1, *) else { return }","","    let attributes = GameActivityAttributes(","        pushwoosh: .create(activityId: \"game-\\(gameId)\"),","        homeTeam: homeTeam,","        awayTeam: awayTeam,","        league: \"NBA\"","    )","","    let contentState = GameActivityAttributes.ContentState(","        pushwoosh: nil,","        homeScore: 0,","        awayScore: 0,","        period: \"1st Quarter\",","        timeRemaining: \"12:00\"","    )","","    do {","        _ = try Activity<GameActivityAttributes>.request(","            attributes: attributes,","            contentState: contentState,","            pushType: .token","        )","    } catch {","        print(\"Failed to start game tracking: \\(error)\")","    }","}"]},{"level":3,"anchor":"Push-Payload-for-Score-Updates","text":"Push Payload for Score Updates","type":"heading"},{"syntax":"json","type":"codeListing","code":["{","  \"aps\": {","    \"alert\": \"Lakers scored!\"","  },","  \"live_activity\": {","    \"event\": \"update\",","    \"content-state\": {","      \"homeScore\": 24,","      \"awayScore\": 18,","      \"period\": \"2nd Quarter\",","      \"timeRemaining\": \"8:45\"","    },","    \"attributes-type\": \"GameActivityAttributes\"","  }","}"]},{"type":"heading","text":"Ride Sharing","level":2,"anchor":"Ride-Sharing"},{"anchor":"Activity-Attributes","type":"heading","text":"Activity Attributes","level":3},{"type":"codeListing","code":["import ActivityKit","import PushwooshLiveActivities","","struct RideActivityAttributes: PushwooshLiveActivityAttributes {","    var pushwoosh: PushwooshLiveActivityAttributeData","","    var driverName: String","    var vehicleModel: String","    var licensePlate: String","    var destination: String","","    struct ContentState: PushwooshLiveActivityContentState {","        var pushwoosh: PushwooshLiveActivityContentStateData?","","        enum RideStatus: String, Codable {","            case driverEnRoute","            case arrived","            case riding","            case completed","        }","","        var status: RideStatus","        var estimatedArrival: Date","        var distanceRemaining: String","    }","}"],"syntax":"swift"},{"text":"Starting Ride Tracking","level":3,"anchor":"Starting-Ride-Tracking","type":"heading"},{"code":["import ActivityKit","import PushwooshLiveActivities","","func startRideTracking(rideId: String, driver: String, vehicle: String, plate: String, destination: String) {","    guard #available(iOS 16.1, *) else { return }","","    let attributes = RideActivityAttributes(","        pushwoosh: .create(activityId: \"ride-\\(rideId)\"),","        driverName: driver,","        vehicleModel: vehicle,","        licensePlate: plate,","        destination: destination","    )","","    let contentState = RideActivityAttributes.ContentState(","        pushwoosh: nil,","        status: .driverEnRoute,","        estimatedArrival: Date().addingTimeInterval(300),","        distanceRemaining: \"0.8 mi\"","    )","","    do {","        _ = try Activity<RideActivityAttributes>.request(","            attributes: attributes,","            contentState: contentState,","            pushType: .token","        )","    } catch {","        print(\"Failed to start ride tracking: \\(error)\")","    }","}"],"syntax":"swift","type":"codeListing"},{"text":"Push-to-Start (iOS 17.2+)","level":2,"type":"heading","anchor":"Push-to-Start-iOS-172+"},{"text":"Setup","anchor":"Setup","level":3,"type":"heading"},{"type":"codeListing","syntax":"swift","code":["import UIKit","import PushwooshFramework","import PushwooshLiveActivities","","@main","class AppDelegate: UIResponder, UIApplicationDelegate {","","    func application(","        _ application: UIApplication,","        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?","    ) -> Bool {","","        if #available(iOS 17.2, *) {","            Pushwoosh.LiveActivities.setup(DeliveryActivityAttributes.self)","        }","","        return true","    }","}"]},{"anchor":"Push-to-Start-Payload","type":"heading","level":3,"text":"Push-to-Start Payload"},{"code":["{","  \"aps\": {","    \"alert\": \"Your order is ready!\",","    \"content-state\": {","      \"status\": \"preparing\",","      \"estimatedArrival\": \"2024-11-06T15:30:00Z\",","      \"currentLocation\": \"Restaurant\"","    },","    \"attributes\": {","      \"orderNumber\": \"12345\",","      \"driverName\": \"John\",","      \"deliveryAddress\": \"123 Main St\"","    },","    \"attributes-type\": \"DeliveryActivityAttributes\",","    \"event\": \"start\"","  }","}"],"syntax":"json","type":"codeListing"},{"level":2,"type":"heading","text":"Default Mode Examples","anchor":"Default-Mode-Examples"},{"level":3,"text":"Simple Notification Counter","anchor":"Simple-Notification-Counter","type":"heading"},{"type":"codeListing","syntax":"swift","code":["import PushwooshLiveActivities","","func startNotificationCounter() {","    guard #available(iOS 16.1, *) else { return }","","    let attributes = [\"type\": \"notifications\"]","    let content = [","        \"title\": \"Notifications\",","        \"count\": 1","    ]","","    Pushwoosh.LiveActivities.defaultStart(","        \"notification-counter\",","        attributes: attributes,","        content: content","    )","}"]},{"anchor":"Push-Payload","level":3,"text":"Push Payload","type":"heading"},{"type":"codeListing","syntax":"json","code":["{","  \"aps\": {","    \"alert\": \"New notification\"","  },","  \"live_activity\": {","    \"event\": \"update\",","    \"content-state\": {","      \"data\": {","        \"title\": \"Notifications\",","        \"count\": 5","      }","    },","    \"attributes-type\": \"DefaultLiveActivityAttributes\"","  }","}"]},{"text":"Timer with Progress","anchor":"Timer-with-Progress","level":3,"type":"heading"},{"code":["import PushwooshLiveActivities","","func startTimer(duration: Int) {","    guard #available(iOS 16.1, *) else { return }","","    let endTime = Date().addingTimeInterval(TimeInterval(duration))","","    let attributes = [\"timerType\": \"workout\"]","    let content = [","        \"title\": \"Workout Timer\",","        \"endTime\": ISO8601DateFormatter().string(from: endTime),","        \"progress\": 0.0","    ] as [String : Any]","","    Pushwoosh.LiveActivities.defaultStart(","        \"workout-timer\",","        attributes: attributes,","        content: content","    )","}"],"syntax":"swift","type":"codeListing"},{"level":2,"anchor":"Handling-Multiple-Activities","text":"Handling Multiple Activities","type":"heading"},{"text":"Managing Multiple Live Activities","type":"heading","level":3,"anchor":"Managing-Multiple-Live-Activities"},{"type":"codeListing","code":["import ActivityKit","import PushwooshLiveActivities","","func listActiveDeliveries() {","    guard #available(iOS 16.1, *) else { return }","","    for activity in Activity<DeliveryActivityAttributes>.activities {","        print(\"Order: \\(activity.attributes.orderNumber)\")","        print(\"Status: \\(activity.contentState.status)\")","        print(\"Activity ID: \\(activity.attributes.pushwoosh.activityId)\")","    }","}","","func endSpecificDelivery(activityId: String) async {","    guard #available(iOS 16.1, *) else { return }","","    for activity in Activity<DeliveryActivityAttributes>.activities {","        if activity.attributes.pushwoosh.activityId == activityId {","            await activity.end(nil, dismissalPolicy: .immediate)","            Pushwoosh.LiveActivities.stopLiveActivity(activityId: activityId)","            break","        }","    }","}"],"syntax":"swift"},{"anchor":"Error-Handling","text":"Error Handling","level":2,"type":"heading"},{"type":"heading","text":"Handling Activity Request Errors","level":3,"anchor":"Handling-Activity-Request-Errors"},{"code":["import ActivityKit","import PushwooshLiveActivities","","func startActivityWithErrorHandling() {","    guard #available(iOS 16.1, *) else {","        print(\"Live Activities require iOS 16.1+\")","        return","    }","","    let attributes = DeliveryActivityAttributes(","        pushwoosh: .create(activityId: \"delivery-123\"),","        orderNumber: \"123\",","        driverName: \"John\",","        deliveryAddress: \"123 Main St\"","    )","","    let contentState = DeliveryActivityAttributes.ContentState(","        pushwoosh: nil,","        status: .preparing,","        estimatedArrival: Date().addingTimeInterval(1800),","        currentLocation: \"Restaurant\"","    )","","    do {","        let activity = try Activity<DeliveryActivityAttributes>.request(","            attributes: attributes,","            contentState: contentState,","            pushType: .token","        )","        print(\"Activity started: \\(activity.id)\")","    } catch let error as ActivityAuthorizationError {","        print(\"Authorization error: \\(error.localizedDescription)\")","    } catch {","        print(\"Failed to start activity: \\(error.localizedDescription)\")","    }","}"],"syntax":"swift","type":"codeListing"},{"level":2,"text":"Next Steps","anchor":"Next-Steps","type":"heading"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/GettingStarted","type":"reference","isActive":true},{"text":" - Setup guide","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/PushwooshLiveActivityAttributes","isActive":true,"type":"reference"},{"text":" - Custom attributes protocol","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/DefaultLiveActivityAttributes","type":"reference"},{"type":"text","text":" - Default mode attributes"}]}]}]}],"kind":"content"}],"kind":"article","references":{"doc://com.pushwoosh.PushwooshLiveActivities/documentation/PushwooshLiveActivities":{"url":"\/documentation\/pushwooshliveactivities","abstract":[{"text":"Real-time iOS Live Activities powered by push notifications.","type":"text"}],"role":"collection","identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities","type":"topic","kind":"symbol","title":"PushwooshLiveActivities"},"doc://com.pushwoosh.PushwooshLiveActivities/documentation/PushwooshLiveActivities/PushwooshLiveActivityAttributes":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"PushwooshLiveActivityAttributes"}],"identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/PushwooshLiveActivityAttributes","url":"\/documentation\/pushwooshliveactivities\/pushwooshliveactivityattributes","abstract":[{"type":"text","text":"Protocol for defining custom Live Activity attributes."}],"title":"PushwooshLiveActivityAttributes","navigatorTitle":[{"text":"PushwooshLiveActivityAttributes","kind":"identifier"}],"role":"symbol","kind":"symbol","type":"topic"},"doc://com.pushwoosh.PushwooshLiveActivities/documentation/PushwooshLiveActivities/DefaultLiveActivityAttributes":{"navigatorTitle":[{"kind":"identifier","text":"DefaultLiveActivityAttributes"}],"role":"symbol","url":"\/documentation\/pushwooshliveactivities\/defaultliveactivityattributes","title":"DefaultLiveActivityAttributes","abstract":[{"text":"A flexible structure for defining Live Activity content dynamically.","type":"text"}],"fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"DefaultLiveActivityAttributes","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/DefaultLiveActivityAttributes","kind":"symbol"},"doc://com.pushwoosh.PushwooshLiveActivities/documentation/PushwooshLiveActivities/GettingStarted":{"type":"topic","role":"article","identifier":"doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/GettingStarted","title":"Getting Started","abstract":[{"text":"Set up iOS Live Activities with push notification updates.","type":"text"}],"url":"\/documentation\/pushwooshliveactivities\/gettingstarted","kind":"article"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"op":"replace","value":"occ","path":"\/identifier\/interfaceLanguage"},{"path":"\/topicSections","op":"add","value":null},{"path":"\/seeAlsoSections","value":[{"generated":true,"title":"Getting Started","identifiers":["doc:\/\/com.pushwoosh.PushwooshLiveActivities\/documentation\/PushwooshLiveActivities\/GettingStarted"]}],"op":"replace"}]}]}