{"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"symbolKind":"method","navigatorTitle":[{"kind":"identifier","text":"sendSKPaymentTransactions:"}],"fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"sendSKPaymentTransactions:"}],"externalID":"c:objc(pl)PWConfiguration(cm)sendSKPaymentTransactions:","roleHeading":"Type Method","modules":[{"name":"PushwooshCore"}],"role":"symbol","title":"sendSKPaymentTransactions:"},"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/sendSKPaymentTransactions:","interfaceLanguage":"occ"},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["iOS"],"tokens":[{"text":"+ (","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:v","text":"void"},{"text":") ","kind":"text"},{"kind":"identifier","text":"sendSKPaymentTransactions:"},{"kind":"text","text":"("},{"text":"NSArray","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSArray"},{"text":" *) ","kind":"text"},{"text":"transactions","kind":"internalParam"},{"text":";","kind":"text"}],"languages":["occ"]}]},{"kind":"parameters","parameters":[{"name":"transactions","content":[{"inlineContent":[{"type":"text","text":"Array of "},{"code":"SKPaymentTransaction","type":"codeVoice"},{"type":"text","text":" objects from StoreKit."}],"type":"paragraph"}]}]},{"kind":"content","content":[{"level":2,"type":"heading","anchor":"discussion","text":"Discussion"},{"type":"paragraph","inlineContent":[{"text":"Automatically tracks in-app purchases from StoreKit transactions.","type":"text"},{"text":" ","type":"text"},{"text":"This enables:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Revenue tracking"}],"type":"strong"},{"type":"text","text":": Monitor purchase revenue in Pushwoosh dashboard"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Purchase-based segmentation"}],"type":"strong"},{"type":"text","text":": Target paying users, high-value customers"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"LTV analysis","type":"text"}]},{"type":"text","text":": Calculate customer lifetime value"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Purchase events","type":"text"}]},{"type":"text","text":": Trigger automations based on purchases"}],"type":"paragraph"}]}]},{"inlineContent":[{"type":"text","text":"Call this method from your "},{"code":"SKPaymentTransactionObserver","type":"codeVoice"},{"text":" for all","type":"text"},{"type":"text","text":" "},{"type":"text","text":"completed transactions."}],"type":"paragraph"},{"type":"heading","anchor":"Example","level":2,"text":"Example"},{"inlineContent":[{"type":"text","text":"Integrate with StoreKit payment observer:"}],"type":"paragraph"},{"code":["class StoreKitManager: NSObject, SKPaymentTransactionObserver {","","    func paymentQueue(_ queue: SKPaymentQueue,","                     updatedTransactions transactions: [SKPaymentTransaction]) {","","        let completedTransactions = transactions.filter {","            $0.transactionState == .purchased || $0.transactionState == .restored","        }","","        \/\/ Send completed transactions to Pushwoosh","        if !completedTransactions.isEmpty {","            Pushwoosh.configure.sendSKPaymentTransactions(completedTransactions)","        }","","        \/\/ Process each transaction","        for transaction in transactions {","            switch transaction.transactionState {","            case .purchased:","                handlePurchase(transaction)","                queue.finishTransaction(transaction)","","            case .restored:","                handleRestore(transaction)","                queue.finishTransaction(transaction)","","            case .failed:","                handleFailure(transaction)","                queue.finishTransaction(transaction)","","            case .deferred, .purchasing:","                break","","            @unknown default:","                break","            }","        }","    }","","    private func handlePurchase(_ transaction: SKPaymentTransaction) {","        let productId = transaction.payment.productIdentifier","","        \/\/ Update user tags for purchase segmentation","        Pushwoosh.configure.setTags([","            \"has_purchased\": true,","            \"last_purchase_date\": ISO8601DateFormatter().string(from: Date()),","            \"last_purchased_product\": productId","        ])","    }","}"],"type":"codeListing","syntax":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"kind":"symbol","sections":[],"abstract":[{"text":"Sends StoreKit payment transactions to Pushwoosh for purchase tracking.","type":"text"}],"variants":[{"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/sendskpaymenttransactions:"],"traits":[{"interfaceLanguage":"occ"}]}],"references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"role":"collection","url":"\/documentation\/pushwooshcore","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","type":"topic","kind":"symbol","title":"PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"type":"topic","kind":"symbol","abstract":[],"title":"PWConfiguration","fragments":[{"kind":"identifier","text":"PWConfiguration"}],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration","role":"symbol","url":"\/documentation\/pushwooshcore\/pwconfiguration"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/sendSKPaymentTransactions:":{"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/sendSKPaymentTransactions:","navigatorTitle":[{"text":"sendSKPaymentTransactions:","kind":"identifier"}],"abstract":[{"type":"text","text":"Sends StoreKit payment transactions to Pushwoosh for purchase tracking."}],"kind":"symbol","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"sendSKPaymentTransactions:"}],"type":"topic","url":"\/documentation\/pushwooshcore\/pwconfiguration\/sendskpaymenttransactions:","role":"symbol","title":"sendSKPaymentTransactions:"}}}