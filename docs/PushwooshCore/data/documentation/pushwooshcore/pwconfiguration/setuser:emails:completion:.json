{"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setUser:emails:completion:","interfaceLanguage":"occ"},"abstract":[{"type":"text","text":"Sets user identifier and emails with completion handler."}],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"schemaVersion":{"patch":0,"major":0,"minor":3},"variants":[{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/setuser:emails:completion:"]}],"sections":[],"metadata":{"externalID":"c:objc(pl)PWConfiguration(cm)setUser:emails:completion:","navigatorTitle":[{"kind":"identifier","text":"setUser:emails:completion:"}],"modules":[{"name":"PushwooshCore"}],"symbolKind":"method","fragments":[{"text":"+ ","kind":"text"},{"text":"setUser:emails:completion:","kind":"identifier"}],"role":"symbol","title":"setUser:emails:completion:","roleHeading":"Type Method"},"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"text":"+ (","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:v","text":"void"},{"kind":"text","text":") "},{"text":"setUser:","kind":"identifier"},{"text":"(","kind":"text"},{"text":"NSString","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSString"},{"kind":"text","text":" *) "},{"text":"userId","kind":"internalParam"},{"kind":"text","text":" "},{"text":"emails:","kind":"identifier"},{"kind":"text","text":"("},{"text":"NSArray","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSArray"},{"text":" *) ","kind":"text"},{"kind":"internalParam","text":"emails"},{"kind":"text","text":" "},{"text":"completion:","kind":"identifier"},{"text":"(","kind":"text"},{"text":"void","kind":"typeIdentifier","preciseIdentifier":"c:v"},{"text":" (^","kind":"text"},{"kind":"text","text":")("},{"preciseIdentifier":"c:objc(cs)NSError","kind":"typeIdentifier","text":"NSError"},{"kind":"text","text":" * "},{"kind":"internalParam","text":"error"},{"text":")) ","kind":"text"},{"kind":"internalParam","text":"completion"},{"text":";","kind":"text"}],"platforms":["iOS"],"languages":["occ"]}]},{"kind":"parameters","parameters":[{"name":"userId","content":[{"inlineContent":[{"type":"text","text":"The custom user identifier."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Array of email address strings."}],"type":"paragraph"}],"name":"emails"},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Block called when the operation completes."},{"type":"text","text":" "},{"type":"text","text":"Receives nil on success, or an NSError on failure."}]}],"name":"completion"}]},{"kind":"content","content":[{"text":"Discussion","type":"heading","anchor":"discussion","level":2},{"type":"paragraph","inlineContent":[{"text":"Atomically associates a user ID with multiple email addresses and provides","type":"text"},{"text":" ","type":"text"},{"text":"confirmation when the operation completes. This is the recommended method","type":"text"},{"type":"text","text":" "},{"text":"for user identification during authentication flows.","type":"text"}]},{"text":"Example","level":2,"anchor":"Example","type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Handle OAuth login with full user setup:"}]},{"syntax":"swift","code":["class OAuthLoginHandler {","","    func handleOAuthCallback(_ authResult: OAuthResult,","                            completion: @escaping (Result<Void, Error>) -> Void) {","","        \/\/ Extract user info from OAuth result","        let userId = authResult.userId","        var emails: [String] = []","","        if let primaryEmail = authResult.email {","            emails.append(primaryEmail)","        }","        if let verifiedEmails = authResult.verifiedEmails {","            emails.append(contentsOf: verifiedEmails.filter { $0 != authResult.email })","        }","","        \/\/ Set user and emails with confirmation","        Pushwoosh.configure.setUser(userId, emails: emails) { error in","            if let error = error {","                Logger.error(\"User setup failed: \\(error.localizedDescription)\")","                completion(.failure(error))","                return","            }","","            \/\/ User is now fully identified - set profile tags","            Pushwoosh.configure.setTags([","                \"oauth_provider\": authResult.provider.rawValue,","                \"has_profile_picture\": authResult.profilePictureURL != nil,","                \"locale\": authResult.locale ?? Locale.current.identifier,","                \"first_login\": !self.hasExistingSession(for: userId)","            ])","","            Analytics.track(\"oauth_login_complete\", properties: [","                \"provider\": authResult.provider.rawValue,","                \"email_count\": emails.count","            ])","","            completion(.success(()))","        }","    }","}"],"type":"codeListing"}]}],"kind":"symbol","references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"role":"collection","url":"\/documentation\/pushwooshcore","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","type":"topic","kind":"symbol","title":"PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/setUser:emails:completion:":{"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setUser:emails:completion:","url":"\/documentation\/pushwooshcore\/pwconfiguration\/setuser:emails:completion:","role":"symbol","fragments":[{"kind":"text","text":"+ "},{"text":"setUser:emails:completion:","kind":"identifier"}],"kind":"symbol","navigatorTitle":[{"text":"setUser:emails:completion:","kind":"identifier"}],"title":"setUser:emails:completion:","type":"topic","abstract":[{"type":"text","text":"Sets user identifier and emails with completion handler."}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"type":"topic","kind":"symbol","abstract":[],"title":"PWConfiguration","fragments":[{"kind":"identifier","text":"PWConfiguration"}],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration","role":"symbol","url":"\/documentation\/pushwooshcore\/pwconfiguration"}}}