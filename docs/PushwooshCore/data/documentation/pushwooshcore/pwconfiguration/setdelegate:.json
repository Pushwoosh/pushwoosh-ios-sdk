{"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setDelegate:","interfaceLanguage":"occ"},"primaryContentSections":[{"declarations":[{"languages":["occ"],"platforms":["iOS"],"tokens":[{"text":"+ (","kind":"text"},{"text":"void","kind":"typeIdentifier","preciseIdentifier":"c:v"},{"kind":"text","text":") "},{"text":"setDelegate:","kind":"identifier"},{"kind":"text","text":"("},{"text":"id<PWMessagingDelegate>","kind":"typeIdentifier","preciseIdentifier":"c:Qoobjc(pl)PWMessagingDelegate"},{"kind":"text","text":") "},{"text":"delegate","kind":"internalParam"},{"kind":"text","text":";"}]}],"kind":"declarations"},{"parameters":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Object implementing PWMessagingDelegate protocol, or nil to remove the delegate"}]}],"name":"delegate"}],"kind":"parameters"},{"content":[{"level":2,"text":"Discussion","anchor":"discussion","type":"heading"},{"inlineContent":[{"type":"text","text":"The delegate will receive callbacks when:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"A push notification is received (foreground or background)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"The user taps on a push notification"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Rich media is about to be displayed","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Set the delegate before calling "},{"type":"codeVoice","code":"registerForPushNotifications"},{"type":"text","text":" to ensure you receive"},{"type":"text","text":" "},{"type":"text","text":"all notification events, including those that launched the app."}]},{"type":"heading","text":"Example","level":2,"anchor":"Example"},{"inlineContent":[{"text":"Implement comprehensive notification handling:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["class NotificationCoordinator: NSObject, PWMessagingDelegate {","","    static let shared = NotificationCoordinator()","","    func setup() {","        Pushwoosh.configure.setDelegate(self)","    }","","    \/\/ MARK: - PWMessagingDelegate","","    func pushwoosh(_ pushwoosh: Pushwoosh, onMessageReceived message: PWMessage) {","        Logger.info(\"Push received: \\(message.title ?? \"No title\")\")","","        \/\/ Handle silent push","        if message.isContentAvailable {","            handleSilentPush(message)","            return","        }","","        \/\/ Handle foreground notification","        if message.isForegroundMessage {","            handleForegroundNotification(message)","        }","","        \/\/ Update badge count","        updateBadgeCount(message.badge)","","        \/\/ Track in analytics","        Analytics.track(\"push_received\", properties: buildAnalyticsProperties(from: message))","    }","","    func pushwoosh(_ pushwoosh: Pushwoosh, onMessageOpened message: PWMessage) {","        Logger.info(\"Push opened: \\(message.title ?? \"No title\")\")","","        \/\/ Track open in analytics","        Analytics.track(\"push_opened\", properties: buildAnalyticsProperties(from: message))","","        \/\/ Handle deep link","        if let link = message.link, let url = URL(string: link) {","            DeepLinkRouter.shared.route(to: url)","            return","        }","","        \/\/ Handle custom data actions","        if let customData = message.customData {","            handleCustomAction(customData)","        }","    }","","    private func buildAnalyticsProperties(from message: PWMessage) -> [String: Any] {","        return [","            \"message_id\": message.messageCode ?? \"\",","            \"campaign_id\": message.campaignId,","            \"title\": message.title ?? \"\",","            \"has_deep_link\": message.link != nil,","            \"is_inbox\": message.isInboxMessage","        ]","    }","","    private func handleCustomAction(_ data: [AnyHashable: Any]) {","        if let action = data[\"action\"] as? String {","            switch action {","            case \"open_product\":","                if let productId = data[\"product_id\"] as? String {","                    NavigationCoordinator.shared.showProduct(id: productId)","                }","            case \"open_promo\":","                if let promoCode = data[\"promo_code\"] as? String {","                    NavigationCoordinator.shared.showPromo(code: promoCode)","                }","            default:","                Logger.warning(\"Unknown custom action: \\(action)\")","            }","        }","    }","}"],"syntax":"swift"}],"kind":"content"}],"metadata":{"modules":[{"name":"PushwooshCore"}],"symbolKind":"method","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"setDelegate:"}],"fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"setDelegate:"}],"title":"setDelegate:","roleHeading":"Type Method","externalID":"c:objc(pl)PWConfiguration(cm)setDelegate:"},"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"sections":[],"kind":"symbol","schemaVersion":{"minor":3,"patch":0,"major":0},"variants":[{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/setdelegate:"]}],"abstract":[{"type":"text","text":"Sets the delegate for receiving push notification events."}],"references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"title":"PushwooshCore","url":"\/documentation\/pushwooshcore","kind":"symbol","role":"collection","type":"topic","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"url":"\/documentation\/pushwooshcore\/pwconfiguration","title":"PWConfiguration","abstract":[],"fragments":[{"text":"PWConfiguration","kind":"identifier"}],"kind":"symbol","type":"topic","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration","role":"symbol"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/setDelegate:":{"type":"topic","role":"symbol","abstract":[{"text":"Sets the delegate for receiving push notification events.","type":"text"}],"title":"setDelegate:","kind":"symbol","fragments":[{"text":"+ ","kind":"text"},{"kind":"identifier","text":"setDelegate:"}],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setDelegate:","navigatorTitle":[{"kind":"identifier","text":"setDelegate:"}],"url":"\/documentation\/pushwooshcore\/pwconfiguration\/setdelegate:"}}}