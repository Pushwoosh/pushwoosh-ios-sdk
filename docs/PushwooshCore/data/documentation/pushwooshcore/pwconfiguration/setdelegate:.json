{"variants":[{"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/setdelegate:"],"traits":[{"interfaceLanguage":"occ"}]}],"primaryContentSections":[{"declarations":[{"languages":["occ"],"tokens":[{"kind":"text","text":"+ ("},{"kind":"typeIdentifier","text":"void","preciseIdentifier":"c:v"},{"text":") ","kind":"text"},{"kind":"identifier","text":"setDelegate:"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"c:Qoobjc(pl)PWMessagingDelegate","text":"id<PWMessagingDelegate>"},{"kind":"text","text":") "},{"text":"delegate","kind":"internalParam"},{"kind":"text","text":";"}],"platforms":["iOS"]}],"kind":"declarations"},{"kind":"parameters","parameters":[{"name":"delegate","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Object implementing PWMessagingDelegate protocol, or nil to remove the delegate"}]}]}]},{"kind":"content","content":[{"level":2,"anchor":"discussion","type":"heading","text":"Discussion"},{"inlineContent":[{"type":"text","text":"The delegate will receive callbacks when:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"text":"A push notification is received (foreground or background)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The user taps on a push notification"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Rich media is about to be displayed"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"text":"Set the delegate before calling ","type":"text"},{"code":"registerForPushNotifications","type":"codeVoice"},{"text":" to ensure you receive","type":"text"},{"type":"text","text":" "},{"text":"all notification events, including those that launched the app.","type":"text"}]},{"level":2,"text":"Example","anchor":"Example","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Implement comprehensive notification handling:","type":"text"}]},{"code":["class NotificationCoordinator: NSObject, PWMessagingDelegate {","","    static let shared = NotificationCoordinator()","","    func setup() {","        Pushwoosh.configure.setDelegate(self)","    }","","    \/\/ MARK: - PWMessagingDelegate","","    func pushwoosh(_ pushwoosh: Pushwoosh, onMessageReceived message: PWMessage) {","        Logger.info(\"Push received: \\(message.title ?? \"No title\")\")","","        \/\/ Handle silent push","        if message.isContentAvailable {","            handleSilentPush(message)","            return","        }","","        \/\/ Handle foreground notification","        if message.isForegroundMessage {","            handleForegroundNotification(message)","        }","","        \/\/ Update badge count","        updateBadgeCount(message.badge)","","        \/\/ Track in analytics","        Analytics.track(\"push_received\", properties: buildAnalyticsProperties(from: message))","    }","","    func pushwoosh(_ pushwoosh: Pushwoosh, onMessageOpened message: PWMessage) {","        Logger.info(\"Push opened: \\(message.title ?? \"No title\")\")","","        \/\/ Track open in analytics","        Analytics.track(\"push_opened\", properties: buildAnalyticsProperties(from: message))","","        \/\/ Handle deep link","        if let link = message.link, let url = URL(string: link) {","            DeepLinkRouter.shared.route(to: url)","            return","        }","","        \/\/ Handle custom data actions","        if let customData = message.customData {","            handleCustomAction(customData)","        }","    }","","    private func buildAnalyticsProperties(from message: PWMessage) -> [String: Any] {","        return [","            \"message_id\": message.messageCode ?? \"\",","            \"campaign_id\": message.campaignId,","            \"title\": message.title ?? \"\",","            \"has_deep_link\": message.link != nil,","            \"is_inbox\": message.isInboxMessage","        ]","    }","","    private func handleCustomAction(_ data: [AnyHashable: Any]) {","        if let action = data[\"action\"] as? String {","            switch action {","            case \"open_product\":","                if let productId = data[\"product_id\"] as? String {","                    NavigationCoordinator.shared.showProduct(id: productId)","                }","            case \"open_promo\":","                if let promoCode = data[\"promo_code\"] as? String {","                    NavigationCoordinator.shared.showPromo(code: promoCode)","                }","            default:","                Logger.warning(\"Unknown custom action: \\(action)\")","            }","        }","    }","}"],"type":"codeListing","syntax":"swift"}]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setDelegate:","interfaceLanguage":"occ"},"metadata":{"navigatorTitle":[{"text":"setDelegate:","kind":"identifier"}],"fragments":[{"kind":"text","text":"+ "},{"text":"setDelegate:","kind":"identifier"}],"modules":[{"name":"PushwooshCore"}],"roleHeading":"Type Method","symbolKind":"method","role":"symbol","externalID":"c:objc(pl)PWConfiguration(cm)setDelegate:","title":"setDelegate:"},"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"text":"Sets the delegate for receiving push notification events.","type":"text"}],"kind":"symbol","references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/setDelegate:":{"kind":"symbol","navigatorTitle":[{"text":"setDelegate:","kind":"identifier"}],"title":"setDelegate:","role":"symbol","type":"topic","fragments":[{"text":"+ ","kind":"text"},{"kind":"identifier","text":"setDelegate:"}],"url":"\/documentation\/pushwooshcore\/pwconfiguration\/setdelegate:","abstract":[{"type":"text","text":"Sets the delegate for receiving push notification events."}],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/setDelegate:"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"kind":"symbol","title":"PWConfiguration","role":"symbol","type":"topic","fragments":[{"kind":"identifier","text":"PWConfiguration"}],"url":"\/documentation\/pushwooshcore\/pwconfiguration","abstract":[],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"type":"topic","role":"collection","title":"PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}],"url":"\/documentation\/pushwooshcore","kind":"symbol","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore"}}}