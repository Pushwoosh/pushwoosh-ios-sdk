{"variants":[{"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/loadtags:error:"],"traits":[{"interfaceLanguage":"occ"}]}],"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/loadTags:error:","interfaceLanguage":"occ"},"kind":"symbol","hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"abstract":[{"text":"Retrieves the current device’s tags from the Pushwoosh server.","type":"text"}],"metadata":{"externalID":"c:objc(pl)PWConfiguration(cm)loadTags:error:","roleHeading":"Type Method","navigatorTitle":[{"text":"loadTags:error:","kind":"identifier"}],"symbolKind":"method","modules":[{"name":"PushwooshCore"}],"role":"symbol","fragments":[{"kind":"text","text":"+ "},{"text":"loadTags:error:","kind":"identifier"}],"title":"loadTags:error:"},"schemaVersion":{"minor":3,"patch":0,"major":0},"primaryContentSections":[{"declarations":[{"platforms":["iOS"],"tokens":[{"kind":"text","text":"+ ("},{"kind":"typeIdentifier","text":"void","preciseIdentifier":"c:v"},{"text":") ","kind":"text"},{"kind":"identifier","text":"loadTags:"},{"text":"(","kind":"text"},{"text":"void","preciseIdentifier":"c:v","kind":"typeIdentifier"},{"text":" (^","kind":"text"},{"text":")(","kind":"text"},{"text":"NSDictionary","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSDictionary"},{"kind":"text","text":" * "},{"text":"tags","kind":"internalParam"},{"kind":"text","text":")) "},{"kind":"internalParam","text":"successBlock"},{"text":" ","kind":"text"},{"kind":"identifier","text":"error:"},{"kind":"text","text":"("},{"preciseIdentifier":"c:v","text":"void","kind":"typeIdentifier"},{"kind":"text","text":" (^"},{"kind":"text","text":")("},{"text":"NSError","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSError"},{"kind":"text","text":" * "},{"kind":"internalParam","text":"error"},{"text":")) ","kind":"text"},{"text":"errorBlock","kind":"internalParam"},{"text":";","kind":"text"}],"languages":["occ"]}],"kind":"declarations"},{"kind":"parameters","parameters":[{"name":"successBlock","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Block called when tags are successfully retrieved."},{"text":" ","type":"text"},{"type":"text","text":"Receives a dictionary containing all device tags."}]}]},{"name":"errorBlock","content":[{"inlineContent":[{"text":"Block called if the request fails.","type":"text"},{"type":"text","text":" "},{"text":"Receives an error describing the failure.","type":"text"}],"type":"paragraph"}]}]},{"content":[{"anchor":"discussion","type":"heading","level":2,"text":"Discussion"},{"type":"paragraph","inlineContent":[{"text":"Fetches all tags currently set for this device. Tags are returned as a dictionary where keys","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"are tag names and values are the corresponding tag values."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use this to sync local app state with server-side tags, or to verify tag values."}]},{"level":2,"type":"heading","anchor":"Example","text":"Example"},{"type":"paragraph","inlineContent":[{"text":"Sync user preferences from Pushwoosh tags on app launch:","type":"text"}]},{"code":["class UserPreferencesSync {","","    func syncPreferencesFromServer(completion: @escaping (Result<UserPreferences, Error>) -> Void) {","        Pushwoosh.configure.loadTags({ [weak self] tags in","            guard let tags = tags else {","                completion(.success(UserPreferences.default))","                return","            }","","            let preferences = UserPreferences(","                isPremium: tags[\"is_premium\"] as? Bool ?? false,","                subscriptionTier: tags[\"subscription_tier\"] as? String,","                favoriteCategories: tags[\"favorite_categories\"] as? [String] ?? [],","                notificationPreferences: self?.parseNotificationPrefs(from: tags) ?? .default,","                lastSyncDate: Date()","            )","","            \/\/ Cache locally","            self?.cachePreferences(preferences)","","            completion(.success(preferences))","            Logger.info(\"User preferences synced from server\")","","        }, error: { error in","            Logger.error(\"Failed to load tags: \\(error?.localizedDescription ?? \"Unknown error\")\")","","            \/\/ Fall back to cached preferences","            if let cached = self.loadCachedPreferences() {","                completion(.success(cached))","            } else {","                completion(.failure(error ?? PushwooshError.unknown))","            }","        })","    }","","    private func parseNotificationPrefs(from tags: [AnyHashable: Any]) -> NotificationPreferences {","        return NotificationPreferences(","            marketingEnabled: tags[\"marketing_notifications\"] as? Bool ?? true,","            transactionalEnabled: tags[\"transactional_notifications\"] as? Bool ?? true,","            frequencyCap: tags[\"notification_frequency\"] as? String ?? \"normal\"","        )","    }","}"],"type":"codeListing","syntax":"swift"}],"kind":"content"}],"sections":[],"references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"kind":"symbol","title":"PWConfiguration","role":"symbol","type":"topic","fragments":[{"kind":"identifier","text":"PWConfiguration"}],"url":"\/documentation\/pushwooshcore\/pwconfiguration","abstract":[],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"type":"topic","role":"collection","title":"PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}],"url":"\/documentation\/pushwooshcore","kind":"symbol","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/loadTags:error:":{"url":"\/documentation\/pushwooshcore\/pwconfiguration\/loadtags:error:","abstract":[{"text":"Retrieves the current device’s tags from the Pushwoosh server.","type":"text"}],"kind":"symbol","title":"loadTags:error:","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/loadTags:error:","navigatorTitle":[{"kind":"identifier","text":"loadTags:error:"}],"role":"symbol","fragments":[{"text":"+ ","kind":"text"},{"text":"loadTags:error:","kind":"identifier"}],"type":"topic"}}}