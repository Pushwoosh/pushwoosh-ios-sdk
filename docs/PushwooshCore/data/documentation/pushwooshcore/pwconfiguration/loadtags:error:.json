{"schemaVersion":{"minor":3,"major":0,"patch":0},"abstract":[{"type":"text","text":"Retrieves the current device’s tags from the Pushwoosh server."}],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["iOS"],"languages":["occ"],"tokens":[{"kind":"text","text":"+ ("},{"text":"void","kind":"typeIdentifier","preciseIdentifier":"c:v"},{"text":") ","kind":"text"},{"text":"loadTags:","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"c:v","kind":"typeIdentifier","text":"void"},{"kind":"text","text":" (^"},{"text":")(","kind":"text"},{"kind":"typeIdentifier","text":"NSDictionary","preciseIdentifier":"c:objc(cs)NSDictionary"},{"kind":"text","text":" * "},{"kind":"internalParam","text":"tags"},{"kind":"text","text":")) "},{"text":"successBlock","kind":"internalParam"},{"kind":"text","text":" "},{"text":"error:","kind":"identifier"},{"text":"(","kind":"text"},{"kind":"typeIdentifier","text":"void","preciseIdentifier":"c:v"},{"kind":"text","text":" (^"},{"text":")(","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSError","text":"NSError"},{"kind":"text","text":" * "},{"text":"error","kind":"internalParam"},{"kind":"text","text":")) "},{"text":"errorBlock","kind":"internalParam"},{"text":";","kind":"text"}]}]},{"parameters":[{"name":"successBlock","content":[{"inlineContent":[{"type":"text","text":"Block called when tags are successfully retrieved."},{"text":" ","type":"text"},{"text":"Receives a dictionary containing all device tags.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Block called if the request fails."},{"text":" ","type":"text"},{"type":"text","text":"Receives an error describing the failure."}],"type":"paragraph"}],"name":"errorBlock"}],"kind":"parameters"},{"content":[{"text":"Discussion","anchor":"discussion","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"Fetches all tags currently set for this device. Tags are returned as a dictionary where keys","type":"text"},{"type":"text","text":" "},{"text":"are tag names and values are the corresponding tag values.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use this to sync local app state with server-side tags, or to verify tag values."}]},{"level":2,"text":"Example","type":"heading","anchor":"Example"},{"type":"paragraph","inlineContent":[{"text":"Sync user preferences from Pushwoosh tags on app launch:","type":"text"}]},{"code":["class UserPreferencesSync {","","    func syncPreferencesFromServer(completion: @escaping (Result<UserPreferences, Error>) -> Void) {","        Pushwoosh.configure.loadTags({ [weak self] tags in","            guard let tags = tags else {","                completion(.success(UserPreferences.default))","                return","            }","","            let preferences = UserPreferences(","                isPremium: tags[\"is_premium\"] as? Bool ?? false,","                subscriptionTier: tags[\"subscription_tier\"] as? String,","                favoriteCategories: tags[\"favorite_categories\"] as? [String] ?? [],","                notificationPreferences: self?.parseNotificationPrefs(from: tags) ?? .default,","                lastSyncDate: Date()","            )","","            \/\/ Cache locally","            self?.cachePreferences(preferences)","","            completion(.success(preferences))","            Logger.info(\"User preferences synced from server\")","","        }, error: { error in","            Logger.error(\"Failed to load tags: \\(error?.localizedDescription ?? \"Unknown error\")\")","","            \/\/ Fall back to cached preferences","            if let cached = self.loadCachedPreferences() {","                completion(.success(cached))","            } else {","                completion(.failure(error ?? PushwooshError.unknown))","            }","        })","    }","","    private func parseNotificationPrefs(from tags: [AnyHashable: Any]) -> NotificationPreferences {","        return NotificationPreferences(","            marketingEnabled: tags[\"marketing_notifications\"] as? Bool ?? true,","            transactionalEnabled: tags[\"transactional_notifications\"] as? Bool ?? true,","            frequencyCap: tags[\"notification_frequency\"] as? String ?? \"normal\"","        )","    }","}"],"type":"codeListing","syntax":"swift"}],"kind":"content"}],"kind":"symbol","sections":[],"identifier":{"url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/loadTags:error:","interfaceLanguage":"occ"},"metadata":{"modules":[{"name":"PushwooshCore"}],"roleHeading":"Type Method","symbolKind":"method","role":"symbol","navigatorTitle":[{"text":"loadTags:error:","kind":"identifier"}],"title":"loadTags:error:","externalID":"c:objc(pl)PWConfiguration(cm)loadTags:error:","fragments":[{"kind":"text","text":"+ "},{"kind":"identifier","text":"loadTags:error:"}]},"variants":[{"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/loadtags:error:"],"traits":[{"interfaceLanguage":"occ"}]}],"references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"title":"PushwooshCore","url":"\/documentation\/pushwooshcore","kind":"symbol","role":"collection","type":"topic","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/loadTags:error:":{"navigatorTitle":[{"kind":"identifier","text":"loadTags:error:"}],"type":"topic","url":"\/documentation\/pushwooshcore\/pwconfiguration\/loadtags:error:","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/loadTags:error:","abstract":[{"text":"Retrieves the current device’s tags from the Pushwoosh server.","type":"text"}],"role":"symbol","title":"loadTags:error:","kind":"symbol","fragments":[{"kind":"text","text":"+ "},{"text":"loadTags:error:","kind":"identifier"}]},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"url":"\/documentation\/pushwooshcore\/pwconfiguration","title":"PWConfiguration","abstract":[],"fragments":[{"text":"PWConfiguration","kind":"identifier"}],"kind":"symbol","type":"topic","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration","role":"symbol"}}}