{"identifier":{"interfaceLanguage":"occ","url":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/sendPurchase:withPrice:currencyCode:andDate:"},"metadata":{"externalID":"c:objc(pl)PWConfiguration(cm)sendPurchase:withPrice:currencyCode:andDate:","fragments":[{"text":"+ ","kind":"text"},{"text":"sendPurchase:withPrice:currencyCode:andDate:","kind":"identifier"}],"title":"sendPurchase:withPrice:currencyCode:andDate:","role":"symbol","symbolKind":"method","roleHeading":"Type Method","modules":[{"name":"PushwooshCore"}],"navigatorTitle":[{"text":"sendPurchase:withPrice:currencyCode:andDate:","kind":"identifier"}]},"abstract":[{"text":"Tracks an individual in-app purchase with custom price information.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore","doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"primaryContentSections":[{"declarations":[{"tokens":[{"text":"+ (","kind":"text"},{"kind":"typeIdentifier","text":"void","preciseIdentifier":"c:v"},{"text":") ","kind":"text"},{"text":"sendPurchase:","kind":"identifier"},{"kind":"text","text":"("},{"text":"NSString","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSString"},{"kind":"text","text":" *) "},{"kind":"internalParam","text":"productIdentifier"},{"text":" ","kind":"text"},{"kind":"identifier","text":"withPrice:"},{"text":"(","kind":"text"},{"text":"NSDecimalNumber","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSDecimalNumber"},{"text":" *) ","kind":"text"},{"text":"price","kind":"internalParam"},{"text":" ","kind":"text"},{"text":"currencyCode:","kind":"identifier"},{"kind":"text","text":"("},{"text":"NSString","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSString"},{"kind":"text","text":" *) "},{"kind":"internalParam","text":"currencyCode"},{"text":" ","kind":"text"},{"text":"andDate:","kind":"identifier"},{"text":"(","kind":"text"},{"text":"NSDate","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSDate"},{"text":" *) ","kind":"text"},{"kind":"internalParam","text":"date"},{"kind":"text","text":";"}],"languages":["occ"],"platforms":["iOS"]}],"kind":"declarations"},{"parameters":[{"name":"productIdentifier","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The product identifier (SKU)."}]}]},{"content":[{"inlineContent":[{"text":"The purchase price as NSDecimalNumber for precision.","type":"text"}],"type":"paragraph"}],"name":"price"},{"content":[{"inlineContent":[{"text":"ISO 4217 currency code (e.g., “USD”, “EUR”, “GBP”).","type":"text"}],"type":"paragraph"}],"name":"currencyCode"},{"name":"date","content":[{"type":"paragraph","inlineContent":[{"text":"The date when the purchase occurred.","type":"text"}]}]}],"kind":"parameters"},{"content":[{"text":"Discussion","level":2,"anchor":"discussion","type":"heading"},{"inlineContent":[{"type":"text","text":"Manually track a purchase when you need more control than automatic"},{"text":" ","type":"text"},{"type":"text","text":"StoreKit tracking, or when processing purchases from other sources"},{"type":"text","text":" "},{"type":"text","text":"(web purchases, promotional codes, etc.)."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Use this for:"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"type":"text","text":"Non-StoreKit purchases (web, third-party payment processors)"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Custom price tracking (discounts, promotions)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Server-verified purchases"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Cross-platform purchase sync"}]}]}],"type":"unorderedList"},{"text":"Example","anchor":"Example","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Track purchases from different sources:"}]},{"code":["class PurchaseTracker {","","    func trackStoreKitPurchase(_ transaction: SKPaymentTransaction, product: SKProduct) {","        Pushwoosh.configure.sendPurchase(","            product.productIdentifier,","            withPrice: product.price,","            currencyCode: product.priceLocale.currencyCode ?? \"USD\",","            andDate: transaction.transactionDate ?? Date()","        )","","        updatePurchaseTags(productId: product.productIdentifier, price: product.price)","    }","","    func trackWebPurchase(_ purchase: WebPurchase) {","        \/\/ Track purchase made through web checkout","        Pushwoosh.configure.sendPurchase(","            purchase.productId,","            withPrice: NSDecimalNumber(value: purchase.amount),","            currencyCode: purchase.currency,","            andDate: purchase.timestamp","        )","","        updatePurchaseTags(productId: purchase.productId,","                          price: NSDecimalNumber(value: purchase.amount))","    }","","    func trackPromotionalPurchase(productId: String, originalPrice: Decimal, discountedPrice: Decimal) {","        \/\/ Track discounted purchase","        Pushwoosh.configure.sendPurchase(","            productId,","            withPrice: NSDecimalNumber(decimal: discountedPrice),","            currencyCode: Locale.current.currencyCode ?? \"USD\",","            andDate: Date()","        )","","        Pushwoosh.configure.setTags([","            \"used_promotion\": true,","            \"discount_amount\": NSDecimalNumber(decimal: originalPrice - discountedPrice)","        ])","    }","","    private func updatePurchaseTags(productId: String, price: NSDecimalNumber) {","        Pushwoosh.configure.setTags([","            \"total_purchases\": incrementPurchaseCount(),","            \"total_spent\": calculateTotalSpent(adding: price),","            \"customer_tier\": determineCustomerTier()","        ])","    }","}"],"syntax":"swift","type":"codeListing"}],"kind":"content"}],"kind":"symbol","sections":[],"variants":[{"traits":[{"interfaceLanguage":"occ"}],"paths":["\/documentation\/pushwooshcore\/pwconfiguration\/sendpurchase:withprice:currencycode:anddate:"]}],"references":{"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore":{"type":"topic","role":"collection","title":"PushwooshCore","abstract":[{"type":"text","text":"Core foundation module for Pushwoosh SDK."}],"url":"\/documentation\/pushwooshcore","kind":"symbol","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration":{"kind":"symbol","title":"PWConfiguration","role":"symbol","type":"topic","fragments":[{"kind":"identifier","text":"PWConfiguration"}],"url":"\/documentation\/pushwooshcore\/pwconfiguration","abstract":[],"identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration"},"doc://com.pushwoosh.PushwooshCore/documentation/PushwooshCore/PWConfiguration/sendPurchase:withPrice:currencyCode:andDate:":{"url":"\/documentation\/pushwooshcore\/pwconfiguration\/sendpurchase:withprice:currencycode:anddate:","abstract":[{"type":"text","text":"Tracks an individual in-app purchase with custom price information."}],"title":"sendPurchase:withPrice:currencyCode:andDate:","kind":"symbol","identifier":"doc:\/\/com.pushwoosh.PushwooshCore\/documentation\/PushwooshCore\/PWConfiguration\/sendPurchase:withPrice:currencyCode:andDate:","navigatorTitle":[{"text":"sendPurchase:withPrice:currencyCode:andDate:","kind":"identifier"}],"role":"symbol","fragments":[{"text":"+ ","kind":"text"},{"text":"sendPurchase:withPrice:currencyCode:andDate:","kind":"identifier"}],"type":"topic"}}}